<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuantumPepe Staking</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.7.5/web3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.6.6/dist/umd/index.min.js"></script>
</head>
<body>
    <h1>QuantumPepe Staking</h1>
    
    <button onclick="connectWallet()">ðŸ’³ MetaMask verbinden</button>
    <button onclick="connectWalletConnect()">ðŸ”— WalletConnect verbinden</button>
    <br><br>
    
    <input type="number" id="stakeAmount" placeholder="Menge eingeben">
    <button onclick="stakeTokens(document.getElementById('stakeAmount').value)">ðŸ“¥ Stake</button>
    <br><br>
    
    <button onclick="viewRewards(userAddress)">ðŸ‘€ Rewards ansehen</button>
    <button onclick="claimRewards()">ðŸ’° Claim Rewards</button>
    <button onclick="unstake()">ðŸ”“ Unstake</button>
    
    <script>
        let provider;
        let signer;
        let userAddress;
        const contractAddress = "YOUR_CONTRACT_ADDRESS"; 
        const abi = "YOUR_CONTRACT_ABI";

        async function connectWallet() {
            if (window.ethereum) {
                provider = new ethers.providers.Web3Provider(window.ethereum);
                await provider.send("eth_requestAccounts", []);
                signer = provider.getSigner();
                userAddress = await signer.getAddress();
                console.log("MetaMask verbunden:", userAddress);
            } else {
                alert("Bitte MetaMask installieren!");
            }
        }

        async function connectWalletConnect() {
            const walletConnectProvider = new WalletConnectProvider({
                rpc: {
                    56: "https://bsc-dataseed.binance.org/"
                }
            });
            await walletConnectProvider.enable();
            provider = new ethers.providers.Web3Provider(walletConnectProvider);
            signer = provider.getSigner();
            userAddress = await signer.getAddress();
            console.log("WalletConnect verbunden:", userAddress);
        }

        async function stakeTokens(amount) {
            const contract = new ethers.Contract(contractAddress, abi, signer);
            const amountWei = ethers.utils.parseUnits(amount.toString(), 18);
            const tx = await contract.stakeTokens(amountWei);
            await tx.wait();
            console.log("Tokens gestaked:", amount);
        }

        async function viewRewards() {
            const contract = new ethers.Contract(contractAddress, abi, provider);
            const rewardsWei = await contract.viewReward(userAddress);
            const rewards = ethers.utils.formatUnits(rewardsWei, 18);
            console.log("Rewards:", rewards);
        }

        async function claimRewards() {
            const contract = new ethers.Contract(contractAddress, abi, signer);
            const tx = await contract.claimRewards();
            await tx.wait();
            console.log("Rewards erfolgreich geclaimt!");
        }

        async function unstake() {
            const contract = new ethers.Contract(contractAddress, abi, signer);
            const tx = await contract.unstake();
            await tx.wait();
            console.log("Tokens und Rewards erfolgreich unstaked!");
        }
    </script>
</body>
</html>
